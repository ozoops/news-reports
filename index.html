<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily News Reports</title>
  <style>
    :root {
      color-scheme: light dark;
      font-family: "Pretendard", "Noto Sans KR", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #050505;
      color: #f5f5f5;
    }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      background: radial-gradient(circle at top, rgba(90,156,255,.3), rgba(5,5,5,1));
    }
    main {
      width: min(720px, 100%);
      background: rgba(15,15,18,.85);
      border-radius: 1.25rem;
      padding: 2.5rem;
      box-shadow: 0 1.5rem 3rem rgba(0,0,0,.4);
      backdrop-filter: blur(6px);
    }
    h1 { margin-top: 0; font-size: clamp(1.8rem, 3vw, 2.6rem); }
    p { color: rgba(245,245,245,.8); line-height: 1.6; }
    ul { list-style: none; margin: 2rem 0 0; padding: 0; }
    li { margin-bottom: 0.75rem; }
    a.report {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.9rem 1.1rem;
      border-radius: 0.9rem;
      background: rgba(255,255,255,.04);
      color: inherit;
      text-decoration: none;
      transition: background .2s ease, transform .2s ease;
      border: 1px solid rgba(255,255,255,.08);
    }
    a.report:hover { background: rgba(90,156,255,.15); transform: translateY(-2px); }
    .pill {
      font-size: 0.78rem;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      background: rgba(90,156,255,.15);
      border: 1px solid rgba(90,156,255,.4);
    }
    footer { margin-top: 2rem; font-size: 0.8rem; color: rgba(245,245,245,.6); }
    button.refresh {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      border-radius: 0.6rem;
      border: 1px solid rgba(255,255,255,.2);
      background: transparent;
      color: inherit;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <main>
    <h1>뉴스 리포트</h1>
    <p>
      오늘의 농업·농협 관련 주요 뉴스와 경제 분야 핵심 이슈를 갈무리한 리포트 모음입니다.
      아래 파일을 클릭하면 각 HTML 문서에서 상세한 내용을 바로 확인할 수 있습니다.
    </p>
    <button class="refresh" id="refresh">목록 새로고침</button>
    <ul id="reportList"></ul>
    <template id="rowTemplate">
      <li>
        <a class="report" target="_blank" rel="noopener" href="#">
          <span class="name"></span>
          <span class="pill">HTML</span>
        </a>
      </li>
    </template>
    <footer>
      GitHub API 호출에 실패하면 페이지를 새로고침하거나 잠시 후 다시 시도하세요.
    </footer>
  </main>
  <script>
    const listEl = document.getElementById('reportList');
    const template = document.getElementById('rowTemplate');
    const button = document.getElementById('refresh');

    async function loadReports() {
      listEl.innerHTML = '<li>불러오는 중...</li>';
      try {
        const response = await fetch('https://api.github.com/repos/ozoops/news-reports/contents');
        if (!response.ok) throw new Error('GitHub API 오류');
        const data = await response.json();
        const reports = data.filter(item => item.name.endsWith('.html') && item.name !== 'index.html');
        if (!reports.length) {
          listEl.innerHTML = '<li>아직 업로드된 리포트가 없습니다.</li>';
          return;
        }
        listEl.innerHTML = '';
        reports.sort((a, b) => b.name.localeCompare(a.name, 'ko'));
        reports.forEach(report => {
          const node = template.content.cloneNode(true);
          const anchor = node.querySelector('a');
          anchor.href = report.name;
          anchor.querySelector('.name').textContent = report.name.replace('.html', '');
          listEl.appendChild(node);
        });
      } catch (error) {
        console.error(error);
        listEl.innerHTML = '<li>목록을 불러오지 못했습니다. 잠시 후 다시 시도하세요.</li>';
      }
    }

    button.addEventListener('click', loadReports);
    loadReports();
  </script>
</body>
</html>

